<form [formGroup]="createForm" (ngSubmit)="onSubmit()" class="container">

  <section class="section" *ngIf="currentStep === 1  && !isLoading && !isSuccess && !isServerError">
    <header class="section__header">
      <mat-icon routerLink="/dashboard" class="section__icon">close</mat-icon>
      <h1 class="section__title"><strong>Quem</strong> vai receber a medida disciplinar?</h1>
    </header>

    <div class="section__content">
      <span class="section__label">Lista de colaboradores</span>
      <label *ngFor="let employee of employees" class="section__label section__label--list">
        {{ employee }}

        <input type="radio" formControlName="colaborador" [value]="employee">
      </label>
    </div>

    <footer class="section__footer">
      <button type="button" (click)="nextStep()" [disabled]="!createForm.get('colaborador')?.valid"
        class="section__button">Continuar</button>
    </footer>
  </section>

  <section class="section" *ngIf="currentStep === 2  && !isLoading && !isSuccess && !isServerError">
    <header class="section__header">
      <mat-icon (click)="prevStep()" class="section__icon">arrow_back_ios_new</mat-icon>
      <h1 class="section__title">Infome o <strong>motivo</strong> da solicitação</h1>
    </header>

    <div>
      <label class="section__label">
        Insira o motivo

        <input type="text" formControlName="motivo" placeholder="Dormiu em serviço" enterkeyhint="next"
          (keydown.enter)="$event.preventDefault(); nextStep()" class="section__input">
      </label>
    </div>

    <footer class="section__footer">
      <button type="button" (click)="nextStep()" [disabled]="!createForm.get('motivo')?.valid" class="section__button">
        Continuar
      </button>
    </footer>
  </section>

  <section class="section" *ngIf="currentStep === 3  && !isLoading && !isSuccess && !isServerError">
    <header class="section__header">
      <mat-icon (click)="prevStep()" class="section__icon">arrow_back_ios_new</mat-icon>
      <h1 class="section__title"><strong>Quando</strong> aconteceu o ocorrido?</h1>
    </header>

    <div>
      <label class="section__label">
        Insira a data

        <input type="date" formControlName="data_ocorrido" enterkeyhint="next"
          (keydown.enter)="$event.preventDefault(); nextStep()" class="section__input">
      </label>
    </div>

    <footer class="section__footer">
      <button type="button" (click)="nextStep()" [disabled]="!createForm.get('data_ocorrido')?.valid" class="section__button">
        Continuar
      </button>
    </footer>
  </section>

  <section class="section" *ngIf="currentStep === 4 && !isLoading && !isSuccess && !isServerError">
    <header class="section__header">
      <mat-icon (click)="prevStep()" class="section__icon">arrow_back_ios_new</mat-icon>
      <h1 class="section__title"><strong>Termos e condições</strong> da solicitação</h1>
    </header>

    <div>
      <label class="section__label">
        O RH tem o prazo de até 24 horas para avaliar esta solicitação, considerando o histórico disciplinar do
        colaborador e as informações apresentadas.
        Após a análise, o RH informará ao gestor se a medida será aplicada ou não, bem como o tipo de penalidade
        cabível.
      </label>
    </div>

    <footer class="section__footer">
      <button type="submit" class="section__button">
        Eu Aceito
      </button>
    </footer>
  </section>

  <section class="section" *ngIf="isLoading && !isSuccess && !isServerError">
    <div class="loading">
      <div class="loading__dot"></div>
      <div class="loading__dot"></div>
      <div class="loading__dot"></div>
    </div>
  </section>

  <section class="section" *ngIf="isSuccess && !isLoading && !isServerError">
    <header class="section__header">
      <mat-icon routerLink="/dashboard" class="section__icon">close</mat-icon>
    </header>

    <div class="section__content section__content--status">
      <img [src]="successIllustration" class="section__image">
      <h3 class="section__title">Show de bola!</h3>
      <p class="section__subtitle">
        Sua solicitação foi enviado com sucesso e será analisada pelo setor responsável. Missão quase completa!
      </p>
    </div>

    <footer class="section__footer">
      <button type="button" routerLink="/dashboard" class="section__button">Início</button>
    </footer>
  </section>

  <section class="section" *ngIf="isServerError && !isLoading && !isSuccess">
    <header class="section__header">
      <mat-icon routerLink="/dashboard" class="section__icon">close</mat-icon>
    </header>

    <div class="section__content section__content--status">
      <img [src]="serverErrorIllustration" class="section__image">
      <h3 class="section__title">Não pode ser...!</h3>
      <p class="section__subtitle">
        Parece que nosso servidor não está funcionando como deveria. Por favor, tente outra hora!
      </p>
    </div>

    <footer class="section__footer">
      <button type="button" routerLink="/dashboard" class="section__button">Sair</button>
    </footer>
  </section>

</form>
